{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Liked from\"./Liked\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";const Favorite=()=>{const[data,setData]=useState([]);useEffect(()=>{const fetchData=async()=>{const storedMovies=JSON.parse(localStorage.getItem(\"favMovies\"));if(storedMovies&&storedMovies.length>0){const fetchedData=[];for(const movie of storedMovies){try{const response=await axios.get(\"https://api.themoviedb.org/3/movie/\"+movie.id+\"?api_key=ed82f4c18f2964e75117c2dc65e2161d\");fetchedData.push(response.data);}catch(error){console.error(\"Error fetching movie data:\",error);}}setData(fetchedData);}};fetchData();},[]);const deleteMovie=movieId=>{const updatedFavMovies=data.filter(movie=>movie.id!==movieId);setData(updatedFavMovies);localStorage.setItem(\"favMovies\",JSON.stringify(updatedFavMovies.map(movie=>({id:movie.id}))));};return/*#__PURE__*/_jsx(\"ul\",{className:\"result\",children:data.map((movie,index)=>/*#__PURE__*/_jsx(Liked,{movie:movie,deleteMovie:deleteMovie},index))});};export default Favorite;","map":{"version":3,"names":["React","useEffect","useState","Liked","axios","jsx","_jsx","Favorite","data","setData","fetchData","storedMovies","JSON","parse","localStorage","getItem","length","fetchedData","movie","response","get","id","push","error","console","deleteMovie","movieId","updatedFavMovies","filter","setItem","stringify","map","className","children","index"],"sources":["/Users/valentinwestermeyer/Library/Mobile Documents/com~apple~CloudDocs/Dev/Formation/TP/React/movie-app-master/src/components/Favorite.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Liked from \"./Liked\";\nimport axios from \"axios\";\n\nconst Favorite = () => {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const storedMovies = JSON.parse(localStorage.getItem(\"favMovies\"));\n      if (storedMovies && storedMovies.length > 0) {\n        const fetchedData = [];\n        for (const movie of storedMovies) {\n          try {\n            const response = await axios.get(\n              `https://api.themoviedb.org/3/movie/` +\n                movie.id +\n                `?api_key=ed82f4c18f2964e75117c2dc65e2161d`\n            );\n            fetchedData.push(response.data);\n          } catch (error) {\n            console.error(\"Error fetching movie data:\", error);\n          }\n        }\n        setData(fetchedData);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const deleteMovie = (movieId) => {\n    const updatedFavMovies = data.filter((movie) => movie.id !== movieId);\n    setData(updatedFavMovies);\n    localStorage.setItem(\n      \"favMovies\",\n      JSON.stringify(updatedFavMovies.map((movie) => ({ id: movie.id })))\n    );\n  };\n\n  return (\n    <ul className=\"result\">\n      {data.map((movie, index) => (\n        <Liked key={index} movie={movie} deleteMovie={deleteMovie} />\n      ))}\n    </ul>\n  );\n};\n\nexport default Favorite;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAEpCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAS,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAC,YAAY,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CAClE,GAAIJ,YAAY,EAAIA,YAAY,CAACK,MAAM,CAAG,CAAC,CAAE,CAC3C,KAAM,CAAAC,WAAW,CAAG,EAAE,CACtB,IAAK,KAAM,CAAAC,KAAK,GAAI,CAAAP,YAAY,CAAE,CAChC,GAAI,CACF,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAf,KAAK,CAACgB,GAAG,CAC9B,sCACEF,KAAK,CAACG,EAAE,4CAEZ,CAAC,CACDJ,WAAW,CAACK,IAAI,CAACH,QAAQ,CAACX,IAAI,CAAC,CACjC,CAAE,MAAOe,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CACAd,OAAO,CAACQ,WAAW,CAAC,CACtB,CACF,CAAC,CAEDP,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAe,WAAW,CAAIC,OAAO,EAAK,CAC/B,KAAM,CAAAC,gBAAgB,CAAGnB,IAAI,CAACoB,MAAM,CAAEV,KAAK,EAAKA,KAAK,CAACG,EAAE,GAAKK,OAAO,CAAC,CACrEjB,OAAO,CAACkB,gBAAgB,CAAC,CACzBb,YAAY,CAACe,OAAO,CAClB,WAAW,CACXjB,IAAI,CAACkB,SAAS,CAACH,gBAAgB,CAACI,GAAG,CAAEb,KAAK,GAAM,CAAEG,EAAE,CAAEH,KAAK,CAACG,EAAG,CAAC,CAAC,CAAC,CACpE,CAAC,CACH,CAAC,CAED,mBACEf,IAAA,OAAI0B,SAAS,CAAC,QAAQ,CAAAC,QAAA,CACnBzB,IAAI,CAACuB,GAAG,CAAC,CAACb,KAAK,CAAEgB,KAAK,gBACrB5B,IAAA,CAACH,KAAK,EAAae,KAAK,CAAEA,KAAM,CAACO,WAAW,CAAEA,WAAY,EAA9CS,KAAgD,CAC7D,CAAC,CACA,CAAC,CAET,CAAC,CAED,cAAe,CAAA3B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}