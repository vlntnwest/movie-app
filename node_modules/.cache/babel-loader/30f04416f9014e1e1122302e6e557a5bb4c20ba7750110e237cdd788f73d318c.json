{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{TiStarFullOutline}from\"react-icons/ti\";import{FaRegBookmark}from\"react-icons/fa6\";import{FaBookmark}from\"react-icons/fa6\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Card=_ref=>{let{movie,onDelete}=_ref;const[genreData,setGenreData]=useState([]);const[isFavorite,setIsFavorite]=useState(()=>{let storedData=window.localStorage.movies?window.localStorage.movies.split(\",\"):[];return storedData.includes(movie.id.toString());});useEffect(()=>{axios.get(\"https://api.themoviedb.org/3/genre/movie/list?api_key=ed82f4c18f2964e75117c2dc65e2161d\").then(res=>setGenreData(res.data.genres)).catch(error=>console.error(\"Error fetching genre data:\",error));},[]);const getGenreNameById=id=>{const genre=genreData.find(genre=>genre.id===id);return genre?genre.name:\"Unknown\";};const dateFormater=date=>{let newDate=new Date(date).toLocaleDateString(\"fr-FR\",{year:\"numeric\",month:\"numeric\",day:\"numeric\"});return newDate;};const formattedDate=dateFormater(movie.release_date);const addStorage=()=>{let storedData=window.localStorage.movies?window.localStorage.movies.split(\",\"):[];if(!storedData.includes(movie.id.toString())){storedData.push(movie.id);window.localStorage.movies=storedData;setIsFavorite(true);}};const deleteStorage=()=>{let storedData=window.localStorage.movies?window.localStorage.movies.split(\",\"):[];if(storedData.includes(movie.id.toString())){storedData=storedData.filter(id=>id!==movie.id.toString());window.localStorage.movies=storedData.join(\",\");setIsFavorite(false);if(onDelete){onDelete(movie.id);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"card-wrapper\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:movie.poster_path?\"https://image.tmdb.org/t/p/original/\"+movie.poster_path:\"/movie-app/img/poster.jpg\",alt:\"Affiche \"+movie.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"infos\",children:[/*#__PURE__*/_jsx(TiStarFullOutline,{}),/*#__PURE__*/_jsxs(\"h5\",{children:[movie.vote_average.toFixed(2),\"/10\"]}),/*#__PURE__*/_jsx(\"h5\",{children:\"|\"}),/*#__PURE__*/_jsx(\"h5\",{children:formattedDate})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"tag\",children:movie.genre_ids?movie.genre_ids.map(id=>/*#__PURE__*/_jsx(\"li\",{children:getGenreNameById(id)},id)):movie.genres.map(genre=>/*#__PURE__*/_jsx(\"li\",{children:genre.name},genre.name))}),/*#__PURE__*/_jsx(\"p\",{children:movie.overview}),isFavorite?/*#__PURE__*/_jsx(\"div\",{className:\"btn\",onClick:()=>{deleteStorage();},children:/*#__PURE__*/_jsx(FaBookmark,{})}):/*#__PURE__*/_jsx(\"div\",{className:\"btn\",onClick:()=>addStorage(),children:/*#__PURE__*/_jsx(FaRegBookmark,{})})]}),\" \"]})]})});};export default Card;","map":{"version":3,"names":["React","useEffect","useState","axios","TiStarFullOutline","FaRegBookmark","FaBookmark","jsx","_jsx","jsxs","_jsxs","Card","_ref","movie","onDelete","genreData","setGenreData","isFavorite","setIsFavorite","storedData","window","localStorage","movies","split","includes","id","toString","get","then","res","data","genres","catch","error","console","getGenreNameById","genre","find","name","dateFormater","date","newDate","Date","toLocaleDateString","year","month","day","formattedDate","release_date","addStorage","push","deleteStorage","filter","join","className","children","src","poster_path","alt","title","vote_average","toFixed","genre_ids","map","overview","onClick"],"sources":["/Users/valentinwestermeyer/Library/Mobile Documents/com~apple~CloudDocs/Dev/Formation/TP/React/movie-app/src/components/Card.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { TiStarFullOutline } from \"react-icons/ti\";\nimport { FaRegBookmark } from \"react-icons/fa6\";\nimport { FaBookmark } from \"react-icons/fa6\";\n\nconst Card = ({ movie, onDelete }) => {\n  const [genreData, setGenreData] = useState([]);\n  const [isFavorite, setIsFavorite] = useState(() => {\n    let storedData = window.localStorage.movies\n      ? window.localStorage.movies.split(\",\")\n      : [];\n    return storedData.includes(movie.id.toString());\n  });\n\n  useEffect(() => {\n    axios\n      .get(\n        \"https://api.themoviedb.org/3/genre/movie/list?api_key=ed82f4c18f2964e75117c2dc65e2161d\"\n      )\n      .then((res) => setGenreData(res.data.genres))\n      .catch((error) => console.error(\"Error fetching genre data:\", error));\n  }, []);\n\n  const getGenreNameById = (id) => {\n    const genre = genreData.find((genre) => genre.id === id);\n    return genre ? genre.name : \"Unknown\";\n  };\n\n  const dateFormater = (date) => {\n    let newDate = new Date(date).toLocaleDateString(\"fr-FR\", {\n      year: \"numeric\",\n      month: \"numeric\",\n      day: \"numeric\",\n    });\n    return newDate;\n  };\n\n  const formattedDate = dateFormater(movie.release_date);\n\n  const addStorage = () => {\n    let storedData = window.localStorage.movies\n      ? window.localStorage.movies.split(\",\")\n      : [];\n\n    if (!storedData.includes(movie.id.toString())) {\n      storedData.push(movie.id);\n      window.localStorage.movies = storedData;\n      setIsFavorite(true);\n    }\n  };\n\n  const deleteStorage = () => {\n    let storedData = window.localStorage.movies\n      ? window.localStorage.movies.split(\",\")\n      : [];\n\n    if (storedData.includes(movie.id.toString())) {\n      storedData = storedData.filter((id) => id !== movie.id.toString());\n      window.localStorage.movies = storedData.join(\",\");\n      setIsFavorite(false);\n      if (onDelete) {\n        onDelete(movie.id);\n      }\n    }\n  };\n\n  return (\n    <div className=\"card-wrapper\">\n      <li className=\"card\">\n        <div className=\"img-container\">\n          <img\n            src={\n              movie.poster_path\n                ? \"https://image.tmdb.org/t/p/original/\" + movie.poster_path\n                : \"/movie-app/img/poster.jpg\"\n            }\n            alt={\"Affiche \" + movie.title}\n          />\n        </div>\n        <div className=\"content-wrapper\">\n          <div className=\"content\">\n            <h2>{movie.title}</h2>\n            <div className=\"infos\">\n              <TiStarFullOutline />\n              <h5>{movie.vote_average.toFixed(2)}/10</h5>\n              <h5>|</h5>\n              <h5>{formattedDate}</h5>\n            </div>\n            <ul className=\"tag\">\n              {movie.genre_ids\n                ? movie.genre_ids.map((id) => (\n                    <li key={id}>{getGenreNameById(id)}</li>\n                  ))\n                : movie.genres.map((genre) => (\n                    <li key={genre.name}>{genre.name}</li>\n                  ))}\n            </ul>\n            <p>{movie.overview}</p>\n            {isFavorite ? (\n              <div\n                className=\"btn\"\n                onClick={() => {\n                  deleteStorage();\n                }}\n              >\n                <FaBookmark />\n              </div>\n            ) : (\n              <div className=\"btn\" onClick={() => addStorage()}>\n                <FaRegBookmark />\n              </div>\n            )}\n          </div>{\" \"}\n        </div>\n      </li>\n    </div>\n  );\n};\n\nexport default Card;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}