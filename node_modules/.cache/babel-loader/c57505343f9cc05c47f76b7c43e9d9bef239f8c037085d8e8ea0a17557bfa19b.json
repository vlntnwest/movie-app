{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Card=_ref=>{let{movie}=_ref;const[genreData,setGenreData]=useState([]);const dateFormater=date=>{let newDate=new Date(date).toLocaleDateString(\"fr-FR\",{year:\"numeric\",month:\"long\",day:\"numeric\"});return newDate;};const formattedDate=dateFormater(movie.release_date);useEffect(()=>{axios.get(\"https://api.themoviedb.org/3/genre/movie/list?api_key=ed82f4c18f2964e75117c2dc65e2161d\").then(res=>setGenreData(res.data.genres)).catch(error=>console.error(\"Error fetching genre data:\",error));},[]);const getGenreNameById=id=>{const genre=genreData.find(genre=>genre.id===id);return genre?genre.name:\"Unknown\";};const saveMovie=e=>{e.preventDefault();let searchFavMovies=JSON.parse(localStorage.getItem(\"favMovies\")||\"[]\");let savedMovies={id:movie.id};const isMovieAlreadySaved=searchFavMovies.some(savedMovie=>savedMovie.id===savedMovies.id);if(movie.id.length!=0&&!isMovieAlreadySaved){searchFavMovies.push(savedMovies);localStorage.setItem(\"favMovies\",JSON.stringify(searchFavMovies));}};return/*#__PURE__*/_jsxs(\"li\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster_path?\"https://image.tmdb.org/t/p/original/\"+movie.poster_path:\"/img/poster.jpg\",alt:\"Affiche \"+movie.title}),/*#__PURE__*/_jsx(\"h2\",{children:movie.title}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Sorti le : \",formattedDate]}),/*#__PURE__*/_jsxs(\"h4\",{children:[movie.vote_average,\"/10\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"tag\",children:movie.genre_ids.map(id=>/*#__PURE__*/_jsx(\"li\",{children:getGenreNameById(id)},id))}),/*#__PURE__*/_jsx(\"h3\",{children:\"Synopsis\"}),/*#__PURE__*/_jsx(\"p\",{children:movie.overview}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",id:\"favorite\",onClick:e=>saveMovie(e),children:\"Ajouter aux favoris\"})})]});};export default Card;","map":{"version":3,"names":["axios","React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Card","_ref","movie","genreData","setGenreData","dateFormater","date","newDate","Date","toLocaleDateString","year","month","day","formattedDate","release_date","get","then","res","data","genres","catch","error","console","getGenreNameById","id","genre","find","name","saveMovie","e","preventDefault","searchFavMovies","JSON","parse","localStorage","getItem","savedMovies","isMovieAlreadySaved","some","savedMovie","length","push","setItem","stringify","className","children","src","poster_path","alt","title","vote_average","genre_ids","map","overview","onClick"],"sources":["/Users/valentinwestermeyer/Library/Mobile Documents/com~apple~CloudDocs/Dev/Formation/TP/React/movie-app/src/components/Card.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\n\nconst Card = ({ movie }) => {\n  const [genreData, setGenreData] = useState([]);\n\n  const dateFormater = (date) => {\n    let newDate = new Date(date).toLocaleDateString(\"fr-FR\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    });\n    return newDate;\n  };\n\n  const formattedDate = dateFormater(movie.release_date);\n\n  useEffect(() => {\n    axios\n      .get(\n        \"https://api.themoviedb.org/3/genre/movie/list?api_key=ed82f4c18f2964e75117c2dc65e2161d\"\n      )\n      .then((res) => setGenreData(res.data.genres))\n      .catch((error) => console.error(\"Error fetching genre data:\", error));\n  }, []);\n\n  const getGenreNameById = (id) => {\n    const genre = genreData.find((genre) => genre.id === id);\n    return genre ? genre.name : \"Unknown\";\n  };\n\n  const saveMovie = (e) => {\n    e.preventDefault();\n    let searchFavMovies = JSON.parse(localStorage.getItem(\"favMovies\") || \"[]\");\n    let savedMovies = {\n      id: movie.id,\n    };\n\n    const isMovieAlreadySaved = searchFavMovies.some(\n      (savedMovie) => savedMovie.id === savedMovies.id\n    );\n\n    if (movie.id.length != 0 && !isMovieAlreadySaved) {\n      searchFavMovies.push(savedMovies);\n      localStorage.setItem(\"favMovies\", JSON.stringify(searchFavMovies));\n    }\n  };\n\n  return (\n    <li className=\"card\">\n      <img\n        src={\n          movie.poster_path\n            ? \"https://image.tmdb.org/t/p/original/\" + movie.poster_path\n            : \"/img/poster.jpg\"\n        }\n        alt={\"Affiche \" + movie.title}\n      />\n      <h2>{movie.title}</h2>\n      <h5>Sorti le : {formattedDate}</h5>\n      <h4>{movie.vote_average}/10</h4>\n      <ul className=\"tag\">\n        {movie.genre_ids.map((id) => (\n          <li key={id}>{getGenreNameById(id)}</li>\n        ))}\n      </ul>\n      <h3>Synopsis</h3>\n      <p>{movie.overview}</p>\n      <form>\n        <button className=\"btn\" id=\"favorite\" onClick={(e) => saveMovie(e)}>\n          Ajouter aux favoris\n        </button>\n      </form>\n    </li>\n  );\n};\n\nexport default Card;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}